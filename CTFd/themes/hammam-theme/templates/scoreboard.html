{% extends "base.html" %}

{% block content %}
<div class="jumbotron">
  <div class="container text-center">
    <h1>{% trans %}Scoreboard{% endtrans %}</h1>
  </div>
</div>

<div class="container" x-data="ScoreboardList">
  {% include "components/errors.html" %}

  <div id="score-graph" class="align-items-center" :class="{'d-flex': show, 'd-none': !show}" x-data="ScoreboardDetail" x-ref="scoregraph" @bracket-change.window="activeBracket=$event.detail; update();">
    <div class="col-md-12 text-center">
      <i class="fas fa-circle-notch fa-spin fa-3x fa-fw spinner"></i>
    </div>
  </div>

  <div id="scoreboard" class="row">
    <div class="col-md-12" x-show="standings.length > 0">
      <div class="podium-flex-wrapper">
        
        <template x-if="standings.length >= 2">
          <div class="podium-item second-place">
            <div class="podium-card">
              <div class="rank-badge">2</div>
              <div class="avatar-placeholder medal-silver">
                  <i class="fas fa-medal"></i>
              </div>
              <a :href="standings[1].account_url" class="podium-link">
                <h4 x-text="standings[1].name"></h4>
              </a>
              <p class="points" x-text="standings[1].score + ' pts'"></p>
            </div>
          </div>
        </template>

        <template x-if="standings.length >= 1">
          <div class="podium-item first-place">
            <div class="podium-card">
              <div class="rank-badge">â˜…</div>
              <div class="avatar-placeholder medal-gold">
                  <i class="fas fa-crown"></i>
              </div>
              <a :href="standings[0].account_url" class="podium-link">
                <h4 x-text="standings[0].name"></h4>
              </a>
              <p class="points gold" x-text="standings[0].score + ' pts'"></p>
            </div>
          </div>
        </template>

        <template x-if="standings.length >= 3">
          <div class="podium-item third-place">
            <div class="podium-card">
              <div class="rank-badge">3</div>
              <div class="avatar-placeholder medal-bronze">
                  <i class="fas fa-medal"></i>
              </div>
              <a :href="standings[2].account_url" class="podium-link">
                <h4 x-text="standings[2].name"></h4>
              </a>
              <p class="points" x-text="standings[2].score + ' pts'"></p>
            </div>
          </div>
        </template>
      </div>
    </div>

    <div class="col-md-12" x-show="standings.length">
      <div class="table-responsive">
        <table class="table table-dark-custom">
          <thead>
            <tr>
              <th class="text-center" style="width: 80px;">Place</th>
              <th class="text-start">Team</th>
              <th class="text-center" style="width: 150px;">Score</th>
            </tr>
          </thead>
          <tbody>
            <template x-for="(standing, index) in standings" :key="index">
              <tr x-show="index >= 3">
                <th class="text-center" x-text="index + 1"></th>
                <td class="text-start">
                  <a :href="standing.account_url" x-text="standing.name" class="scoreboard-team-link"></a>
                </td>
                <td class="text-center" x-text="standing.score"></td>
              </tr>
            </template>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
  {{ Assets.js("assets/js/scoreboard.js") }}
{% endblock %}